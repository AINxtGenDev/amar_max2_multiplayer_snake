<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multiplayer Snake Game - Technical Documentation</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #10b981;
            --primary-dark: #059669;
            --primary-light: #34d399;
            --secondary: #3b82f6;
            --secondary-dark: #2563eb;
            --accent: #f59e0b;
            --danger: #ef4444;
            --background: #0a0a0a;
            --surface: #18181b;
            --surface-light: #27272a;
            --border: #3f3f46;
            --text: #fafafa;
            --text-muted: #a1a1aa;
            --code-bg: #1e1e1e;
            --gradient-primary: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            --gradient-accent: linear-gradient(135deg, var(--accent) 0%, var(--danger) 100%);
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
            --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: var(--background);
            color: var(--text);
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.7;
            font-size: 16px;
            overflow-x: hidden;
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 12px;
        }

        ::-webkit-scrollbar-track {
            background: var(--surface);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--surface-light);
            border-radius: 6px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--border);
        }

        /* Header */
        header {
            background: var(--surface);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            transition: all 0.3s ease;
        }

        header.scrolled {
            background: rgba(24, 24, 27, 0.95);
            box-shadow: var(--shadow-lg);
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 1.5rem 2rem;
        }

        header h1 {
            font-size: 2rem;
            font-weight: 700;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 1rem;
        }

        /* Navigation */
        nav {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        nav a {
            padding: 0.5rem 1.25rem;
            background: var(--surface-light);
            color: var(--text);
            text-decoration: none;
            border-radius: 8px;
            font-weight: 500;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        nav a::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 0;
            height: 100%;
            background: var(--gradient-primary);
            transition: width 0.3s ease;
            z-index: -1;
        }

        nav a:hover::before {
            width: 100%;
        }

        nav a:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        /* Container */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
            margin-top: 120px;
        }

        /* Sections */
        .section {
            background: var(--surface);
            margin: 2rem 0;
            padding: 3rem;
            border-radius: 16px;
            border: 1px solid var(--border);
            position: relative;
            overflow: hidden;
        }

        .section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-primary);
        }

        /* Typography */
        h2 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 2rem;
            color: var(--text);
            position: relative;
            padding-bottom: 1rem;
        }

        h2::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 60px;
            height: 4px;
            background: var(--gradient-primary);
            border-radius: 2px;
        }

        h3 {
            font-size: 1.75rem;
            font-weight: 600;
            margin: 2.5rem 0 1.5rem;
            color: var(--primary-light);
        }

        h4 {
            font-size: 1.25rem;
            font-weight: 600;
            margin: 1.5rem 0 1rem;
            color: var(--text);
        }

        p {
            margin-bottom: 1.5rem;
            color: var(--text-muted);
            line-height: 1.8;
        }

        ul, ol {
            margin-left: 2rem;
            margin-bottom: 1.5rem;
        }

        li {
            margin-bottom: 0.75rem;
            color: var(--text-muted);
        }

        /* Code styling */
        code {
            background: var(--code-bg);
            padding: 0.25rem 0.5rem;
            border-radius: 6px;
            font-family: 'JetBrains Mono', 'Consolas', monospace;
            font-size: 0.875em;
            color: var(--primary-light);
            border: 1px solid var(--border);
        }

        pre {
            background: var(--code-bg);
            padding: 1.5rem;
            border-radius: 12px;
            overflow-x: auto;
            margin: 1.5rem 0;
            font-family: 'JetBrains Mono', 'Consolas', monospace;
            font-size: 0.875rem;
            line-height: 1.6;
            border: 1px solid var(--border);
            position: relative;
        }

        /* Code copy button */
        .code-example {
            position: relative;
            margin: 1.5rem 0;
        }

        .copy-button {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: var(--surface-light);
            border: 1px solid var(--border);
            color: var(--text);
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10;
        }

        .copy-button:hover {
            background: var(--primary);
            color: var(--background);
        }

        .copy-button.copied {
            background: var(--primary);
            color: var(--background);
        }

        /* Feature cards */
        .feature-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .feature-card {
            background: var(--surface-light);
            padding: 2rem;
            border-radius: 12px;
            border: 1px solid var(--border);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--gradient-primary);
            transform: scaleY(0);
            transition: transform 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-xl);
            border-color: var(--primary);
        }

        .feature-card:hover::before {
            transform: scaleY(1);
        }

        .feature-card h4 {
            color: var(--primary);
            margin-bottom: 1rem;
        }

        /* Tech badges */
        .tech-used {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
            margin: 2rem 0;
        }

        .tech-badge {
            background: var(--surface-light);
            color: var(--text);
            padding: 0.5rem 1.25rem;
            border-radius: 24px;
            font-size: 0.875rem;
            font-weight: 500;
            border: 1px solid var(--border);
            transition: all 0.3s ease;
        }

        .tech-badge:hover {
            background: var(--primary);
            color: var(--background);
            border-color: var(--primary);
            transform: scale(1.05);
        }

        /* Tables */
        .table-container {
            overflow-x: auto;
            margin: 2rem 0;
            border-radius: 12px;
            border: 1px solid var(--border);
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 1rem 1.5rem;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        th {
            background: var(--surface-light);
            color: var(--primary);
            font-weight: 600;
        }

        tr:hover {
            background: rgba(16, 185, 129, 0.05);
        }

        /* Note and warning boxes */
        .note, .warning {
            padding: 1.5rem;
            margin: 2rem 0;
            border-radius: 12px;
            position: relative;
            padding-left: 4rem;
        }

        .note::before, .warning::before {
            content: '';
            position: absolute;
            left: 1.5rem;
            top: 50%;
            transform: translateY(-50%);
            width: 24px;
            height: 24px;
            background-size: contain;
        }

        .note {
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.3);
            color: var(--text);
        }

        .note::before {
            content: '💡';
            font-size: 1.5rem;
        }

        .warning {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            color: var(--text);
        }

        .warning::before {
            content: '⚠️';
            font-size: 1.5rem;
        }

        /* Back to top button */
        .back-to-top {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: var(--gradient-primary);
            color: white;
            width: 56px;
            height: 56px;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 50%;
            text-decoration: none;
            font-size: 1.5rem;
            box-shadow: var(--shadow-xl);
            transition: all 0.3s ease;
            opacity: 0;
            transform: scale(0);
        }

        .back-to-top.visible {
            opacity: 1;
            transform: scale(1);
        }

        .back-to-top:hover {
            transform: scale(1.1);
        }

        /* Progress indicator */
        .progress-indicator {
            position: fixed;
            top: 0;
            left: 0;
            height: 4px;
            background: var(--gradient-primary);
            z-index: 2000;
            transition: width 0.3s ease;
        }

        /* Table of contents */
        .toc {
            position: fixed;
            left: 2rem;
            top: 50%;
            transform: translateY(-50%);
            background: var(--surface);
            padding: 1.5rem;
            border-radius: 12px;
            border: 1px solid var(--border);
            max-width: 250px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .toc.visible {
            opacity: 1;
        }

        .toc h3 {
            font-size: 1rem;
            margin-bottom: 1rem;
        }

        .toc ul {
            list-style: none;
            margin: 0;
        }

        .toc li {
            margin-bottom: 0.5rem;
        }

        .toc a {
            color: var(--text-muted);
            text-decoration: none;
            font-size: 0.875rem;
            transition: color 0.3s ease;
            display: block;
            padding: 0.25rem 0;
        }

        .toc a:hover {
            color: var(--primary);
        }

        .toc a.active {
            color: var(--primary);
            font-weight: 600;
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 4rem 2rem;
            margin-top: 4rem;
            background: var(--surface);
            border-top: 1px solid var(--border);
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .section {
            animation: fadeInUp 0.6s ease-out;
        }

        /* Responsive design */
        @media (max-width: 1200px) {
            .toc {
                display: none;
            }
        }

        @media (max-width: 768px) {
            .header-content {
                padding: 1rem;
            }

            header h1 {
                font-size: 1.5rem;
            }

            nav {
                gap: 0.5rem;
            }

            nav a {
                padding: 0.4rem 0.8rem;
                font-size: 0.875rem;
            }

            .container {
                padding: 1rem;
                margin-top: 100px;
            }

            .section {
                padding: 2rem 1.5rem;
            }

            h2 {
                font-size: 2rem;
            }

            h3 {
                font-size: 1.5rem;
            }

            .feature-list {
                grid-template-columns: 1fr;
            }

            .back-to-top {
                width: 48px;
                height: 48px;
                right: 1rem;
                bottom: 1rem;
            }
        }

        /* Syntax highlighting */
        .keyword { color: #c678dd; }
        .string { color: #98c379; }
        .number { color: #d19a66; }
        .comment { color: #5c6370; font-style: italic; }
        .function { color: #61afef; }
        .variable { color: #e06c75; }
    </style>
</head>
<body>
    <div class="progress-indicator" id="progress"></div>

    <header id="header">
        <div class="header-content">
            <h1>🐍 Multiplayer Snake Game - Technical Documentation</h1>
            <nav>
                <a href="#overview">Overview</a>
                <a href="#architecture">Architecture</a>
                <a href="#client">Client</a>
                <a href="#ui">UI</a>
                <a href="#server">Server</a>
                <a href="#implementation">Implementation</a>
                <a href="#deployment">Deployment</a>
                <a href="#technologies">Technologies</a>
            </nav>
        </div>
    </header>

    <div class="toc" id="toc">
        <h3>On this page</h3>
        <ul id="toc-list"></ul>
    </div>

    <div class="container">
        <section id="overview" class="section">
            <h2>📋 Project Overview</h2>
            <p>This multiplayer Snake game represents a modern implementation of the classic arcade game, enhanced with real-time multiplayer capabilities using WebSocket technology. Players can create or join custom game rooms, compete against up to 2 other players simultaneously, and experience synchronized gameplay across all connected clients.</p>

            <div class="tech-used">
                <span class="tech-badge">HTML5 Canvas</span>
                <span class="tech-badge">JavaScript ES6+</span>
                <span class="tech-badge">Node.js</span>
                <span class="tech-badge">Express.js</span>
                <span class="tech-badge">Socket.IO</span>
                <span class="tech-badge">CSS3</span>
                <span class="tech-badge">PM2</span>
            </div>

            <h3>🎯 Core Features</h3>
            <div class="feature-list">
                <div class="feature-card">
                    <h4>🌐 Real-time Multiplayer</h4>
                    <p>Up to 3 players can compete in the same game room with synchronized gameplay and instant updates</p>
                </div>
                <div class="feature-card">
                    <h4>🏠 Room System</h4>
                    <p>Players can create custom game rooms with unique IDs or join existing rooms</p>
                </div>
                <div class="feature-card">
                    <h4>⏱️ Grace Period</h4>
                    <p>3-second immunity period at game start prevents unfair early eliminations</p>
                </div>
                <div class="feature-card">
                    <h4>📱 Responsive Design</h4>
                    <p>Fully optimized for both desktop and mobile devices with touch controls</p>
                </div>
                <div class="feature-card">
                    <h4>🔄 Auto-Reconnection</h4>
                    <p>Players can reconnect to their game if connection is lost</p>
                </div>
                <div class="feature-card">
                    <h4>⚡ Performance Optimized</h4>
                    <p>Double buffering and frame limiting ensure smooth 60 FPS gameplay</p>
                </div>
            </div>
        </section>

        <section id="architecture" class="section">
            <h2>🏗️ System Architecture</h2>
            <p>The game follows a robust client-server architecture with WebSocket-based real-time communication. This design ensures low latency, synchronized game state across all players, and authoritative server-side game logic to prevent cheating.</p>

            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Component</th>
                            <th>File</th>
                            <th>Responsibility</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Client Logic</strong></td>
                            <td><code>game.js</code></td>
                            <td>Game rendering, input handling, server communication</td>
                        </tr>
                        <tr>
                            <td><strong>User Interface</strong></td>
                            <td><code>index.html</code></td>
                            <td>HTML structure, CSS styling, UI components</td>
                        </tr>
                        <tr>
                            <td><strong>Game Server</strong></td>
                            <td><code>server.js</code></td>
                            <td>Game state management, collision detection, player synchronization</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3>🔄 Communication Flow</h3>
            <ol>
                <li><strong>Connection:</strong> Client establishes WebSocket connection to server</li>
                <li><strong>Room Join:</strong> Player creates or joins a game room</li>
                <li><strong>Initialization:</strong> Server assigns player color and starting position</li>
                <li><strong>Game Loop:</strong> Server processes game ticks at 100ms intervals</li>
                <li><strong>State Updates:</strong> Server broadcasts game state to all connected clients</li>
                <li><strong>Rendering:</strong> Clients render the received game state at 60 FPS</li>
            </ol>

            <div class="note">
                <p><strong>Server Authority:</strong> All game logic is processed server-side to ensure fairness and prevent cheating. Clients only send input commands and render the authoritative game state received from the server.</p>
            </div>
        </section>

        <section id="client" class="section">
            <h2>💻 Client-Side Implementation (game.js)</h2>
            
            <h3>🎮 Game Constants and Setup</h3>
            <p>The client begins by establishing the game's fundamental parameters and initializing the rendering context:</p>
            
            <div class="code-example">
                <button class="copy-button" onclick="copyCode(this)">Copy</button>
                <pre><code><span class="comment">// Game grid configuration</span>
<span class="keyword">const</span> <span class="variable">GRID_SIZE</span> = <span class="number">30</span>;  <span class="comment">// 30x30 grid</span>
<span class="keyword">const</span> <span class="variable">CELL_SIZE</span> = <span class="number">20</span>;  <span class="comment">// 20px per cell</span>
<span class="keyword">const</span> <span class="variable">GRACE_PERIOD_SECONDS</span> = <span class="number">3</span>;

<span class="comment">// Canvas setup with hardware acceleration</span>
<span class="keyword">const</span> <span class="variable">canvas</span> = document.<span class="function">getElementById</span>(<span class="string">'game-canvas'</span>);
<span class="keyword">const</span> <span class="variable">ctx</span> = canvas.<span class="function">getContext</span>(<span class="string">'2d'</span>);
ctx.imageSmoothingEnabled = <span class="keyword">false</span>; <span class="comment">// Pixel-perfect rendering</span></code></pre>
            </div>

            <h3>🎨 Rendering Optimization</h3>
            <p>The game implements double buffering to eliminate visual artifacts and ensure smooth rendering:</p>
            
            <div class="code-example">
                <button class="copy-button" onclick="copyCode(this)">Copy</button>
                <pre><code><span class="comment">// Create offscreen canvas for double buffering</span>
<span class="keyword">const</span> <span class="variable">offscreenCanvas</span> = document.<span class="function">createElement</span>(<span class="string">'canvas'</span>);
offscreenCanvas.width = canvas.width;
offscreenCanvas.height = canvas.height;
<span class="keyword">const</span> <span class="variable">offscreenCtx</span> = offscreenCanvas.<span class="function">getContext</span>(<span class="string">'2d'</span>);

<span class="comment">// Draw everything to offscreen canvas first</span>
<span class="keyword">function</span> <span class="function">draw</span>() {
    <span class="comment">// Render to offscreen buffer</span>
    offscreenCtx.<span class="function">fillRect</span>(<span class="number">0</span>, <span class="number">0</span>, width, height);
    <span class="function">drawGrid</span>(offscreenCtx);
    <span class="function">drawFood</span>(offscreenCtx);
    <span class="function">drawSnakes</span>(offscreenCtx);
    
    <span class="comment">// Copy to visible canvas in one operation</span>
    ctx.<span class="function">drawImage</span>(offscreenCanvas, <span class="number">0</span>, <span class="number">0</span>);
}</code></pre>
            </div>

            <h3>🌐 WebSocket Communication</h3>
            <p>The client establishes real-time communication with the server using Socket.IO:</p>
            
            <div class="code-example">
                <button class="copy-button" onclick="copyCode(this)">Copy</button>
                <pre><code><span class="keyword">function</span> <span class="function">connectToServer</span>() {
    <span class="variable">socket</span> = <span class="function">io</span>(<span class="string">'https://amarmax.duckdns.org:10556'</span>, {
        transports: [<span class="string">'websocket'</span>],
        reconnectionAttempts: <span class="number">5</span>,
        reconnectionDelay: <span class="number">1000</span>
    });
    
    <span class="comment">// Handle connection events</span>
    socket.<span class="function">on</span>(<span class="string">'connect'</span>, () => {
        connectionStatus.textContent = <span class="string">'Connected'</span>;
        <span class="variable">playerId</span> = socket.id;
    });
    
    <span class="comment">// Receive game state updates</span>
    socket.<span class="function">on</span>(<span class="string">'gameUpdate'</span>, (state) => {
        <span class="variable">gameState</span> = state;
        <span class="function">updateScores</span>();
        <span class="function">draw</span>();
    });
}</code></pre>
            </div>

            <h3>📱 Mobile Touch Controls</h3>
            <p>Touch controls are dynamically added for mobile devices:</p>
            
            <div class="code-example">
                <button class="copy-button" onclick="copyCode(this)">Copy</button>
                <pre><code><span class="keyword">function</span> <span class="function">initTouchControls</span>() {
    <span class="keyword">if</span> (!<span class="function">isMobileDevice</span>()) <span class="keyword">return</span>;
    
    <span class="keyword">const</span> <span class="variable">touchControls</span> = document.<span class="function">createElement</span>(<span class="string">'div'</span>);
    touchControls.className = <span class="string">'touch-controls'</span>;
    
    <span class="comment">// Create directional buttons</span>
    [<span class="string">'up'</span>, <span class="string">'down'</span>, <span class="string">'left'</span>, <span class="string">'right'</span>].<span class="function">forEach</span>(dir => {
        <span class="keyword">const</span> <span class="variable">btn</span> = <span class="function">createTouchButton</span>(dir);
        touchControls.<span class="function">appendChild</span>(btn);
    });
    
    document.body.<span class="function">appendChild</span>(touchControls);
}</code></pre>
            </div>

            <h3>⚡ Performance Features</h3>
            <ul>
                <li><strong>Frame Rate Limiting:</strong> Maintains consistent 60 FPS rendering</li>
                <li><strong>Client-side Prediction:</strong> Immediate visual feedback for inputs</li>
                <li><strong>State Diffing:</strong> Only re-render when game state changes</li>
                <li><strong>Visibility API:</strong> Pauses rendering when tab is not visible</li>
            </ul>
        </section>

        <section id="ui" class="section">
            <h2>🎨 User Interface (index.html)</h2>
            
            <h3>📐 Layout Structure</h3>
            <p>The UI is built with semantic HTML5 and modern CSS3, featuring a responsive grid layout that adapts to different screen sizes:</p>

            <div class="code-example">
                <button class="copy-button" onclick="copyCode(this)">Copy</button>
                <pre><code><span class="comment">&lt;!-- Main game container with responsive flexbox layout --&gt;</span>
&lt;<span class="keyword">div</span> <span class="variable">class</span>=<span class="string">"game-container"</span>&gt;
    &lt;<span class="keyword">canvas</span> <span class="variable">id</span>=<span class="string">"game-canvas"</span> <span class="variable">width</span>=<span class="string">"600"</span> <span class="variable">height</span>=<span class="string">"600"</span>&gt;&lt;/<span class="keyword">canvas</span>&gt;
    
    &lt;<span class="keyword">div</span> <span class="variable">class</span>=<span class="string">"controls-panel"</span>&gt;
        &lt;<span class="comment">!-- Game controls and information --&gt;</span>
    &lt;/<span class="keyword">div</span>&gt;
&lt;/<span class="keyword">div</span>&gt;</code></pre>
            </div>

            <h3>🎨 Visual Design System</h3>
            <p>The game uses CSS custom properties for consistent theming:</p>

            <div class="code-example">
                <button class="copy-button" onclick="copyCode(this)">Copy</button>
                <pre><code><span class="keyword">:root</span> {
    <span class="comment">/* Color palette */</span>
    <span class="variable">--primary</span>: <span class="string">#4CAF50</span>;
    <span class="variable">--secondary</span>: <span class="string">#8BC34A</span>;
    <span class="variable">--accent</span>: <span class="string">#FF5722</span>;
    <span class="variable">--background</span>: <span class="string">#121212</span>;
    <span class="variable">--surface</span>: <span class="string">#1E1E1E</span>;
    
    <span class="comment">/* Spacing and sizing */</span>
    <span class="variable">--spacing-unit</span>: <span class="number">8px</span>;
    <span class="variable">--border-radius</span>: <span class="number">10px</span>;
}</code></pre>
            </div>

            <h3>🖼️ UI Components</h3>
            <div class="feature-list">
                <div class="feature-card">
                    <h4>Join Game Overlay</h4>
                    <p>Modal dialog for entering player name and room ID with validation</p>
                </div>
                <div class="feature-card">
                    <h4>Game Controls Panel</h4>
                    <p>Start, reset, and room management buttons with state-based enabling</p>
                </div>
                <div class="feature-card">
                    <h4>Live Scoreboard</h4>
                    <p>Real-time player scores with visual indicators for alive/dead status</p>
                </div>
                <div class="feature-card">
                    <h4>Game Over Screen</h4>
                    <p>Winner announcement with play again functionality</p>
                </div>
            </div>
        </section>

        <section id="server" class="section">
            <h2>🖥️ Server Implementation (server.js)</h2>
            
            <h3>🚀 Server Architecture</h3>
            <p>The Node.js server manages game state, processes player inputs, and ensures synchronized gameplay across all connected clients:</p>

            <div class="code-example">
                <button class="copy-button" onclick="copyCode(this)">Copy</button>
                <pre><code><span class="keyword">const</span> <span class="variable">express</span> = <span class="function">require</span>(<span class="string">'express'</span>);
<span class="keyword">const</span> <span class="variable">http</span> = <span class="function">require</span>(<span class="string">'http'</span>);
<span class="keyword">const</span> <span class="variable">socketIo</span> = <span class="function">require</span>(<span class="string">'socket.io'</span>);

<span class="comment">// Game configuration</span>
<span class="keyword">const</span> <span class="variable">GAME_SPEED</span> = <span class="number">100</span>; <span class="comment">// 10 ticks per second</span>
<span class="keyword">const</span> <span class="variable">MAX_PLAYERS</span> = <span class="number">3</span>;
<span class="keyword">const</span> <span class="variable">GRACE_PERIOD_TICKS</span> = <span class="number">30</span>; <span class="comment">// 3 seconds</span>

<span class="comment">// Player colors in order of assignment</span>
<span class="keyword">const</span> <span class="variable">PLAYER_COLORS</span> = [<span class="string">'#6EE766'</span>, <span class="string">'#FF5252'</span>, <span class="string">'#42AAFF'</span>];</code></pre>
            </div>

            <h3>🎮 Game State Management</h3>
            <p>Each game room maintains its own isolated state:</p>

            <div class="code-example">
                <button class="copy-button" onclick="copyCode(this)">Copy</button>
                <pre><code><span class="keyword">function</span> <span class="function">createNewGame</span>(gameId) {
    <span class="keyword">return</span> {
        id: gameId,
        players: {},
        food: [],
        running: <span class="keyword">false</span>,
        interval: <span class="keyword">null</span>,
        ticksSinceStart: <span class="number">0</span>,
        gameOver: <span class="keyword">false</span>,
        countdownActive: <span class="keyword">false</span>
    };
}</code></pre>
            </div>

            <h3>🔄 Game Loop</h3>
            <p>The server runs a deterministic game loop for each active room:</p>

            <div class="code-example">
                <button class="copy-button" onclick="copyCode(this)">Copy</button>
                <pre><code><span class="keyword">function</span> <span class="function">updateGame</span>(gameId) {
    <span class="keyword">const</span> <span class="variable">game</span> = games[gameId];
    <span class="keyword">if</span> (!game || !game.running) <span class="keyword">return</span>;
    
    game.ticksSinceStart++;
    
    <span class="comment">// Process each player</span>
    <span class="keyword">for</span> (<span class="keyword">const</span> <span class="variable">playerId</span> <span class="keyword">in</span> game.players) {
        <span class="keyword">const</span> <span class="variable">player</span> = game.players[playerId];
        <span class="keyword">if</span> (!player.snake.alive) <span class="keyword">continue</span>;
        
        <span class="comment">// Update position</span>
        <span class="function">moveSnake</span>(player.snake);
        
        <span class="comment">// Check collisions (after grace period)</span>
        <span class="keyword">if</span> (game.ticksSinceStart > <span class="variable">GRACE_PERIOD_TICKS</span>) {
            <span class="function">checkCollisions</span>(game, player);
        }
        
        <span class="comment">// Check food consumption</span>
        <span class="function">checkFoodCollision</span>(game, player);
    }
    
    <span class="comment">// Broadcast updated state</span>
    io.<span class="function">to</span>(gameId).<span class="function">emit</span>(<span class="string">'gameUpdate'</span>, game);
}</code></pre>
            </div>

            <h3>⚡ Key Server Features</h3>
            <ul>
                <li><strong>Authoritative Game Logic:</strong> All game rules enforced server-side</li>
                <li><strong>Room Isolation:</strong> Each game room runs independently</li>
                <li><strong>Automatic Cleanup:</strong> Empty rooms are automatically removed</li>
                <li><strong>Connection Management:</strong> Handles player disconnections gracefully</li>
                <li><strong>State Validation:</strong> Prevents invalid moves and cheating</li>
            </ul>
        </section>

        <section id="implementation" class="section">
            <h2>🔧 Implementation Details</h2>

            <h3>🐍 Snake Movement Algorithm</h3>
            <p>The snake movement system ensures smooth, grid-based movement:</p>

            <div class="code-example">
                <button class="copy-button" onclick="copyCode(this)">Copy</button>
                <pre><code><span class="comment">// Direction vectors for movement</span>
<span class="keyword">const</span> <span class="variable">directions</span> = {
    up: { x: <span class="number">0</span>, y: <span class="number">-1</span> },
    right: { x: <span class="number">1</span>, y: <span class="number">0</span> },
    down: { x: <span class="number">0</span>, y: <span class="number">1</span> },
    left: { x: <span class="number">-1</span>, y: <span class="number">0</span> }
};

<span class="keyword">function</span> <span class="function">moveSnake</span>(snake) {
    <span class="keyword">const</span> <span class="variable">head</span> = snake.body[<span class="number">0</span>];
    <span class="keyword">const</span> <span class="variable">dir</span> = directions[snake.direction];
    
    <span class="comment">// Calculate new head position</span>
    <span class="keyword">const</span> <span class="variable">newHead</span> = {
        x: head.x + dir.x,
        y: head.y + dir.y
    };
    
    <span class="comment">// Add new head</span>
    snake.body.<span class="function">unshift</span>(newHead);
    
    <span class="comment">// Remove tail (unless food was eaten)</span>
    <span class="keyword">if</span> (!snake.justAteFood) {
        snake.body.<span class="function">pop</span>();
    }
}</code></pre>
            </div>

            <h3>💥 Collision Detection</h3>
            <div class="feature-list">
                <div class="feature-card">
                    <h4>Wall Collisions</h4>
                    <p>Check if snake head position exceeds grid boundaries (0 to GRID_SIZE-1)</p>
                </div>
                <div class="feature-card">
                    <h4>Snake Collisions</h4>
                    <p>Compare head position with all snake body segments (including own body)</p>
                </div>
                <div class="feature-card">
                    <h4>Food Collisions</h4>
                    <p>Check if head position matches any food item coordinates</p>
                </div>
            </div>

            <h3>🍎 Food Generation</h3>
            <p>Food items are generated at random empty grid positions:</p>

            <div class="code-example">
                <button class="copy-button" onclick="copyCode(this)">Copy</button>
                <pre><code><span class="keyword">function</span> <span class="function">createFood</span>(gameState) {
    <span class="keyword">if</span> (gameState.food.length >= <span class="variable">MAX_FOOD</span>) <span class="keyword">return</span>;
    
    <span class="keyword">let</span> <span class="variable">position</span>;
    <span class="keyword">do</span> {
        position = {
            x: Math.<span class="function">floor</span>(Math.<span class="function">random</span>() * <span class="variable">GRID_SIZE</span>),
            y: Math.<span class="function">floor</span>(Math.<span class="function">random</span>() * <span class="variable">GRID_SIZE</span>)
        };
    } <span class="keyword">while</span> (!<span class="function">isEmptyCell</span>(gameState, position));
    
    gameState.food.<span class="function">push</span>({
        ...position,
        color: <span class="function">generateRandomColor</span>()
    });
}</code></pre>
            </div>
        </section>

        <section id="deployment" class="section">
            <h2>🚀 Production Deployment</h2>
            
            <h3>📦 PM2 Process Management</h3>
            <p>The game server is managed using PM2 for production reliability:</p>

            <div class="code-example">
                <button class="copy-button" onclick="copyCode(this)">Copy</button>
                <pre><code><span class="comment"># Start the application</span>
pm2 start server.js --name snake-game

<span class="comment"># Enable startup on system boot</span>
pm2 startup
pm2 save

<span class="comment"># Monitor application</span>
pm2 monit

<span class="comment"># View logs</span>
pm2 logs snake-game --lines 100

<span class="comment"># Graceful reload with zero downtime</span>
pm2 reload snake-game</code></pre>
            </div>

            <h3>🔒 HTTPS with Caddy</h3>
            <p>Caddy serves as a reverse proxy with automatic HTTPS:</p>

            <div class="code-example">
                <button class="copy-button" onclick="copyCode(this)">Copy</button>
                <pre><code><span class="comment"># /etc/caddy/Caddyfile</span>
amarmax.duckdns.org:<span class="number">10556</span> {
    tls otto.kuegerl@gmail.com
    
    log {
        output file /var/log/caddy/snake-game.log
        level INFO
    }
    
    reverse_proxy localhost:<span class="number">10555</span> {
        header_up Host {http.request.host}
        header_up X-Real-IP {http.request.remote}
        header_up X-Forwarded-Proto {http.request.scheme}
    }
}</code></pre>
            </div>

            <div class="warning">
                <p><strong>Security Note:</strong> Always use HTTPS in production to encrypt WebSocket traffic and protect player data. The server runs on HTTP locally (port 10555) while Caddy handles SSL termination.</p>
            </div>
        </section>

        <section id="technologies" class="section">
            <h2>🛠️ Technology Stack</h2>
            <p>This project leverages modern web technologies to deliver a seamless multiplayer gaming experience:</p>

            <div class="feature-list">
                <div class="feature-card">
                    <h4>🌐 HTML5</h4>
                    <p><strong>Canvas API:</strong> Hardware-accelerated 2D rendering for smooth gameplay<br>
                    <strong>Semantic markup:</strong> Accessible and SEO-friendly structure<br>
                    <strong>Form validation:</strong> Built-in input validation for player names</p>
                </div>

                <div class="feature-card">
                    <h4>🎨 CSS3</h4>
                    <p><strong>Custom Properties:</strong> Dynamic theming system<br>
                    <strong>Grid & Flexbox:</strong> Responsive layouts<br>
                    <strong>Animations:</strong> Smooth transitions and visual feedback</p>
                </div>

                <div class="feature-card">
                    <h4>⚡ JavaScript ES6+</h4>
                    <p><strong>Modules:</strong> Clean code organization<br>
                    <strong>Async/Await:</strong> Elegant promise handling<br>
                    <strong>Arrow Functions:</strong> Concise syntax</p>
                </div>

                <div class="feature-card">
                    <h4>🚀 Node.js</h4>
                    <p><strong>Event-driven:</strong> Non-blocking I/O for high concurrency<br>
                    <strong>V8 Engine:</strong> Fast JavaScript execution<br>
                    <strong>NPM Ecosystem:</strong> Rich package availability</p>
                </div>

                <div class="feature-card">
                    <h4>🌐 Express.js</h4>
                    <p><strong>Minimal framework:</strong> Low overhead<br>
                    <strong>Middleware:</strong> Extensible request handling<br>
                    <strong>Static serving:</strong> Efficient file delivery</p>
                </div>

                <div class="feature-card">
                    <h4>🔌 Socket.IO</h4>
                    <p><strong>WebSocket priority:</strong> Low-latency communication<br>
                    <strong>Auto-reconnection:</strong> Resilient connections<br>
                    <strong>Room support:</strong> Built-in game room management</p>
                </div>
            </div>

            <div class="note">
                <p><strong>Performance Tip:</strong> The combination of Canvas API for rendering and WebSockets for communication provides the optimal balance between visual quality and real-time responsiveness required for multiplayer gaming.</p>
            </div>
        </section>

        <section class="section">
            <h2>🎓 Conclusion</h2>
            <p>This multiplayer Snake game demonstrates modern web development best practices, combining real-time communication, responsive design, and performance optimization to create an engaging gaming experience. The architecture separates concerns effectively, with the server maintaining authoritative game state while clients focus on smooth rendering and input handling.</p>

            <h3>Key Takeaways</h3>
            <ul>
                <li><strong>Server Authority:</strong> Prevents cheating and ensures fair gameplay</li>
                <li><strong>Real-time Sync:</strong> WebSockets enable instant state updates</li>
                <li><strong>Performance First:</strong> Optimizations ensure smooth 60 FPS gameplay</li>
                <li><strong>Cross-platform:</strong> Works seamlessly on desktop and mobile</li>
                <li><strong>Scalable Design:</strong> Room-based architecture supports multiple concurrent games</li>
            </ul>

            <div class="tech-used">
                <span class="tech-badge">🎮 Game Development</span>
                <span class="tech-badge">🌐 Real-time Web</span>
                <span class="tech-badge">📱 Responsive Design</span>
                <span class="tech-badge">⚡ Performance</span>
                <span class="tech-badge">🔒 Security</span>
            </div>
        </section>
    </div>

    <footer>
        <p>© 2025 <strong>Amar Novalic</strong>, <strong>Max Steinbauer</strong>, <strong>Max Gradischnig</strong>. All rights reserved.</p>
        <p>Created with ❤️ for the multiplayer gaming community</p>
    </footer>

    <a href="#" class="back-to-top" id="backToTop">↑</a>

    <script>
        // Smooth scrolling for navigation
        document.querySelectorAll('nav a, .toc a').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                const targetElement = document.querySelector(targetId);
                
                window.scrollTo({
                    top: targetElement.offsetTop - 140,
                    behavior: 'smooth'
                });
            });
        });

        // Back to top button
        const backToTop = document.getElementById('backToTop');
        window.addEventListener('scroll', () => {
            if (window.pageYOffset > 300) {
                backToTop.classList.add('visible');
            } else {
                backToTop.classList.remove('visible');
            }
        });

        backToTop.addEventListener('click', (e) => {
            e.preventDefault();
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });

        // Header scroll effect
        const header = document.getElementById('header');
        window.addEventListener('scroll', () => {
            if (window.pageYOffset > 50) {
                header.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
            }
        });

        // Progress indicator
        const progress = document.getElementById('progress');
        window.addEventListener('scroll', () => {
            const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
            const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            const scrolled = (winScroll / height) * 100;
            progress.style.width = scrolled + '%';
        });

        // Copy code functionality
        function copyCode(button) {
            const codeBlock = button.nextElementSibling.querySelector('code');
            const text = codeBlock.textContent;
            
            navigator.clipboard.writeText(text).then(() => {
                button.textContent = 'Copied!';
                button.classList.add('copied');
                
                setTimeout(() => {
                    button.textContent = 'Copy';
                    button.classList.remove('copied');
                }, 2000);
            });
        }

        // Generate table of contents
        const tocList = document.getElementById('toc-list');
        const toc = document.getElementById('toc');
        const sections = document.querySelectorAll('.section h2, .section h3');
        
        if (window.innerWidth > 1200) {
            sections.forEach((heading) => {
                const li = document.createElement('li');
                const a = document.createElement('a');
                a.href = `#${heading.parentElement.id || heading.id}`;
                a.textContent = heading.textContent.replace(/[📋🏗️💻🎨🖥️🔧🚀🛠️🎓]/g, '').trim();
                
                if (heading.tagName === 'H3') {
                    a.style.paddingLeft = '1rem';
                    a.style.fontSize = '0.8rem';
                }
                
                li.appendChild(a);
                tocList.appendChild(li);
            });

            // Show TOC after scroll
            window.addEventListener('scroll', () => {
                if (window.pageYOffset > 200) {
                    toc.classList.add('visible');
                } else {
                    toc.classList.remove('visible');
                }
            });

            // Highlight active section
            const observerOptions = {
                rootMargin: '-20% 0px -70% 0px'
            };

            const observerCallback = (entries) => {
                entries.forEach(entry => {
                    const id = entry.target.getAttribute('id');
                    const tocLink = document.querySelector(`.toc a[href="#${id}"]`);
                    
                    if (tocLink) {
                        if (entry.intersectionRatio > 0) {
                            document.querySelectorAll('.toc a').forEach(a => a.classList.remove('active'));
                            tocLink.classList.add('active');
                        }
                    }
                });
            };

            const observer = new IntersectionObserver(observerCallback, observerOptions);
            document.querySelectorAll('.section').forEach(section => observer.observe(section));
        }
    </script>
</body>
</html>
